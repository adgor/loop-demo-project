const newsButton = document.querySelectorAll(".news-right__item");
const modalOuter = document.querySelector(".modal-outer");
const modalInner = document.querySelector(".modal-inner");
const menuBtn = document.querySelector("#menu-btn");

function handleNewsButtonClick(e) {
  const card = e.currentTarget;
  const date = card.querySelector(".date").dataset.date;
  const modalContent = card.querySelector("#modal-content");
  const title = modalContent.querySelector(".modal-title").dataset.title;
  const subtitle =
    modalContent.querySelector(".modal-subtitle").dataset.subtitle;
  const desc1 = modalContent.querySelector(".modal-desc-up").dataset.desc;
  const imgSrc = modalContent.querySelector(".modal-image").dataset.imgsrc;
  const desc2 = modalContent.querySelector(".modal-desc-down").dataset.desc;
  // console.log(menuBtn);

  //   populate modal with news
  modalInner.innerHTML = `
  <div class="modal-header">
  <span class="logo">
    <svg
      width="221"
      height="52"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
              d="M84.574 20.636c-.128-1.08-.646-1.917-1.555-2.514-.91-.596-2.025-.895-3.346-.895-.966 0-1.81.157-2.535.469-.718.313-1.279.742-1.684 1.29a3.09 3.09 0 0 0-.596 1.863c0 .583.138 1.084.415 1.503.285.412.647.756 1.087 1.033.44.27.902.494 1.385.671.483.17.927.31 1.332.416l2.216.596c.568.15 1.2.355 1.896.618a8.754 8.754 0 0 1 2.013 1.076 5.479 5.479 0 0 1 1.598 1.726c.42.703.629 1.566.629 2.589 0 1.179-.309 2.244-.927 3.196-.61.951-1.506 1.708-2.684 2.269-1.172.561-2.596.841-4.272.841-1.563 0-2.916-.252-4.06-.756-1.136-.504-2.03-1.207-2.684-2.11-.647-.901-1.012-1.949-1.098-3.142h2.728c.07.824.348 1.506.83 2.045.49.533 1.109.93 1.855 1.194a7.504 7.504 0 0 0 2.428.383c1.009 0 1.915-.163 2.717-.49.803-.334 1.438-.795 1.907-1.385.469-.596.703-1.293.703-2.088 0-.724-.202-1.314-.607-1.768-.405-.455-.938-.824-1.598-1.108a16.797 16.797 0 0 0-2.141-.746l-2.685-.767c-1.705-.49-3.054-1.19-4.048-2.099-.995-.909-1.492-2.099-1.492-3.569 0-1.221.33-2.287.99-3.196.669-.916 1.563-1.626 2.686-2.13 1.129-.512 2.39-.768 3.781-.768 1.407 0 2.657.253 3.75.757 1.094.497 1.96 1.179 2.6 2.045.646.867.987 1.85 1.023 2.951h-2.557Zm13.719 16.705c-1.577 0-2.937-.348-4.08-1.044-1.137-.703-2.014-1.683-2.632-2.94-.61-1.265-.916-2.735-.916-4.411 0-1.676.305-3.153.916-4.432.618-1.285 1.477-2.287 2.578-3.004 1.108-.725 2.4-1.087 3.878-1.087.852 0 1.694.142 2.525.426a6.257 6.257 0 0 1 2.269 1.385c.682.632 1.225 1.47 1.63 2.515.405 1.044.607 2.33.607 3.856v1.066H92.455v-2.174h10.057c0-.923-.185-1.747-.554-2.471a4.179 4.179 0 0 0-1.556-1.716c-.667-.419-1.456-.628-2.365-.628-1.001 0-1.868.248-2.6.746a4.904 4.904 0 0 0-1.672 1.917 5.634 5.634 0 0 0-.586 2.536v1.448c0 1.236.213 2.284.64 3.143.433.853 1.033 1.502 1.8 1.95.767.44 1.658.66 2.674.66.66 0 1.257-.092 1.79-.277a3.83 3.83 0 0 0 1.395-.852c.391-.383.693-.86.906-1.427l2.429.681a5.397 5.397 0 0 1-1.289 2.174c-.604.618-1.35 1.1-2.238 1.449-.887.34-1.885.51-2.993.51Zm17.205 6.136c-1.214 0-2.258-.156-3.132-.468-.874-.306-1.602-.71-2.184-1.215a6.65 6.65 0 0 1-1.374-1.598l2.003-1.406c.227.298.514.639.862 1.023.348.39.824.727 1.428 1.012.611.29 1.41.436 2.397.436 1.321 0 2.411-.32 3.271-.958.859-.64 1.289-1.641 1.289-3.005v-3.324h-.213c-.185.299-.448.668-.789 1.108-.334.434-.816.82-1.449 1.162-.625.333-1.47.5-2.535.5-1.321 0-2.507-.312-3.558-.937-1.044-.625-1.872-1.534-2.483-2.727-.603-1.194-.905-2.642-.905-4.347 0-1.676.295-3.136.884-4.379.59-1.25 1.41-2.215 2.461-2.897 1.051-.69 2.266-1.034 3.644-1.034 1.065 0 1.91.178 2.535.533.632.348 1.115.746 1.449 1.193.341.44.604.803.788 1.087h.256v-2.6h2.429V37.47c0 1.406-.32 2.55-.959 3.43-.632.888-1.484 1.538-2.557 1.95-1.065.419-2.251.628-3.558.628Zm-.085-8.991c1.008 0 1.861-.231 2.557-.693.696-.461 1.225-1.125 1.587-1.992.362-.866.543-1.903.543-3.11 0-1.18-.177-2.22-.532-3.122-.355-.902-.881-1.609-1.577-2.12-.696-.512-1.555-.767-2.578-.767-1.066 0-1.953.27-2.664.81-.703.54-1.232 1.264-1.587 2.173-.348.909-.522 1.917-.522 3.025 0 1.137.178 2.142.533 3.015.362.867.895 1.549 1.598 2.046.71.49 1.591.735 2.642.735Zm18.622 2.855c-1.577 0-2.937-.348-4.08-1.044-1.137-.703-2.014-1.683-2.632-2.94-.61-1.265-.916-2.735-.916-4.411 0-1.676.306-3.153.916-4.432.618-1.285 1.478-2.287 2.578-3.004 1.108-.725 2.401-1.087 3.878-1.087.853 0 1.694.142 2.525.426a6.248 6.248 0 0 1 2.269 1.385c.682.632 1.225 1.47 1.63 2.515.405 1.044.608 2.33.608 3.856v1.066h-12.614v-2.174h10.057c0-.923-.185-1.747-.554-2.471a4.172 4.172 0 0 0-1.556-1.716c-.667-.419-1.456-.628-2.365-.628-1.001 0-1.868.248-2.599.746a4.904 4.904 0 0 0-1.673 1.917 5.642 5.642 0 0 0-.586 2.536v1.448c0 1.236.213 2.284.64 3.143.433.853 1.033 1.502 1.8 1.95.767.44 1.658.66 2.674.66.66 0 1.257-.092 1.79-.277a3.822 3.822 0 0 0 1.395-.852c.391-.383.693-.86.906-1.427l2.429.681a5.397 5.397 0 0 1-1.289 2.174c-.604.618-1.35 1.1-2.237 1.449-.888.34-1.886.51-2.994.51Zm13.114-22.16V37h-2.514V15.182h2.514Zm11.722 5.455v2.131h-8.48v-2.13h8.48Zm-6.009-3.92h2.514v15.596c0 .71.103 1.243.309 1.599.213.347.483.582.81.703.334.113.685.17 1.055.17.277 0 .504-.014.682-.042l.426-.086.511 2.259c-.17.064-.408.128-.714.191-.305.072-.692.107-1.161.107-.71 0-1.406-.153-2.088-.458a4.142 4.142 0 0 1-1.683-1.396c-.441-.625-.661-1.413-.661-2.365V16.716Zm16.476 20.625c-1.577 0-2.937-.348-4.081-1.044-1.136-.703-2.013-1.683-2.631-2.94-.611-1.265-.916-2.735-.916-4.411 0-1.676.305-3.153.916-4.432.618-1.285 1.477-2.287 2.578-3.004 1.108-.725 2.401-1.087 3.878-1.087.852 0 1.694.142 2.525.426a6.257 6.257 0 0 1 2.269 1.385c.682.632 1.225 1.47 1.63 2.515.405 1.044.607 2.33.607 3.856v1.066H163.5v-2.174h10.056c0-.923-.184-1.747-.554-2.471a4.17 4.17 0 0 0-1.555-1.716c-.668-.419-1.456-.628-2.365-.628-1.001 0-1.868.248-2.599.746a4.904 4.904 0 0 0-1.673 1.917 5.628 5.628 0 0 0-.586 2.536v1.448c0 1.236.213 2.284.639 3.143.434.853 1.034 1.502 1.801 1.95.767.44 1.658.66 2.674.66.66 0 1.257-.092 1.789-.277a3.835 3.835 0 0 0 1.396-.852c.391-.383.693-.86.906-1.427l2.429.681a5.397 5.397 0 0 1-1.289 2.174c-.604.618-1.35 1.1-2.238 1.449-.887.34-1.885.51-2.993.51Zm15.415.042c-1.037 0-1.978-.195-2.823-.585a4.844 4.844 0 0 1-2.013-1.716c-.498-.752-.746-1.662-.746-2.727 0-.937.184-1.697.554-2.28a3.908 3.908 0 0 1 1.481-1.385 7.779 7.779 0 0 1 2.045-.745c.753-.17 1.509-.306 2.269-.405.995-.128 1.801-.224 2.419-.288.625-.07 1.079-.188 1.363-.351.291-.164.437-.448.437-.853v-.085c0-1.051-.288-1.868-.863-2.45-.568-.583-1.431-.874-2.589-.874-1.2 0-2.141.263-2.823.789-.682.525-1.161 1.086-1.438 1.683l-2.386-.852c.426-.995.994-1.769 1.704-2.323a6.388 6.388 0 0 1 2.344-1.172 9.726 9.726 0 0 1 2.514-.34c.526 0 1.129.063 1.811.191.689.12 1.353.373 1.992.756.647.384 1.183.963 1.609 1.737.426.774.639 1.811.639 3.11V37h-2.514v-2.216h-.128c-.17.355-.454.735-.852 1.14-.398.405-.927.75-1.587 1.033-.661.285-1.467.426-2.419.426Zm.384-2.258c.994 0 1.832-.195 2.514-.586.689-.39 1.207-.895 1.555-1.513a3.857 3.857 0 0 0 .533-1.95v-2.3c-.107.127-.341.245-.703.351-.355.1-.767.188-1.236.267-.462.07-.913.134-1.353.191-.433.05-.785.093-1.055.128a9.6 9.6 0 0 0-1.832.416c-.561.184-1.016.465-1.364.841-.341.37-.511.874-.511 1.513 0 .873.323 1.534.969 1.982.654.44 1.481.66 2.483.66ZM196.842 37V20.636h2.429v2.557h.213c.341-.873.892-1.552 1.651-2.035.76-.49 1.673-.735 2.738-.735 1.08 0 1.978.245 2.696.735.724.483 1.289 1.162 1.694 2.035h.17a4.767 4.767 0 0 1 1.886-2.013c.838-.505 1.843-.757 3.015-.757 1.463 0 2.659.458 3.59 1.375.93.909 1.395 2.326 1.395 4.25V37h-2.514V26.048c0-1.207-.33-2.07-.991-2.588-.66-.519-1.438-.778-2.333-.778-1.15 0-2.042.348-2.674 1.044-.632.689-.948 1.562-.948 2.62V37h-2.557V25.793c0-.93-.301-1.68-.905-2.248-.604-.576-1.382-.863-2.333-.863a3.45 3.45 0 0 0-1.833.522 3.941 3.941 0 0 0-1.363 1.449c-.341.61-.512 1.317-.512 2.12V37h-2.514Z" fill="#fff"      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M26 0c14.359 0 26 11.641 26 26S40.359 52 26 52 0 40.359 0 26 11.641 0 26 0Z"
        fill="#fff"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="m41.001 22.509-17.008 9.499V13.01l17.008 9.499Z"
        fill="#C4132F"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M20 10h4v34h-4V10Z"
        fill="#C4132F"
      />
    </svg>
  </span>
</div>
<div class="modal-content">
  <div class="modal-content__item spacing">
    <div class="date" data-date="${date}">
      <svg
        width="29"
        height="29"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M26.75 28.5H2.25A1.75 1.75 0 0 1 .5 26.75V2.25C.5 1.284 1.284.5 2.25.5H4v5.25h7V.5h7v5.25h7V.5h1.75c.967 0 1.75.784 1.75 1.75v24.5a1.75 1.75 0 0 1-1.75 1.75ZM25 9.25H4V25h21V9.25Zm-14 7H7.5v-3.5H11v3.5Zm0 5.25H7.5V18H11v3.5Zm5.25-5.25h-3.5v-3.5h3.5v3.5Zm0 5.25h-3.5V18h3.5v3.5Zm5.25-5.25H18v-3.5h3.5v3.5Zm0 5.25H18V18h3.5v3.5ZM19.75.5h3.5V4h-3.5V.5Zm-14 0h3.5V4h-3.5V.5Z"
          fill="#717171"
        ></path>
      </svg>
      ${date}
    </div>
    <div class="modal-info">
      <h2 class="title">${title}</h2>
      <p class="subtitle">${subtitle}</p>
      <hr />
    </div>
    <p>${desc1}</p>
    <img
    height="350"
    src="${imgSrc.replace("1025", "600")}"
    alt="${subtitle}"
    />
    <p>${desc2}</p>
  </div>
  <div class="modal-icons">
    <span id="close-modal"  class="close-modal"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        aria-hidden="true"
        role="img"
        width="2em"
        height="2em"
        preserveAspectRatio="xMidYMid meet"
        viewBox="0 0 1216 1312"
      >
        <path
          fill="currentColor"
          d="M1202 1066q0 40-28 68l-136 136q-28 28-68 28t-68-28L608 976l-294 294q-28 28-68 28t-68-28L42 1134q-28-28-28-68t28-68l294-294L42 410q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294l294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68L880 704l294 294q28 28 28 68z"
        />
      </svg>
    </span>
    <sapn class="modal-social-icon"> 
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 320 512"><path fill="currentColor" d="m279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/></svg>
    </span>
  </div>
</div>  
`;
  // show the modal
  modalOuter.classList.add("show-modal");
  menuBtn.classList.add("miri");
}

newsButton.forEach((button) =>
  button.addEventListener("click", handleNewsButtonClick)
);

function closeModal() {
  modalOuter.classList.remove("show-modal");
  menuBtn.classList.remove("miri");
}

// close modal from click outside OR close icon
modalOuter.addEventListener("click", function (e) {
  const isOutside = !e.target.closest(".modal-inner");
  const isIcon = e.target.closest("#close-modal");
  if (isOutside || isIcon) {
    closeModal();
  }
});

// close modal from keyboard
window.addEventListener("keydown", (e) => {
  if (e.key === "Escape") {
    closeModal();
  }
});
